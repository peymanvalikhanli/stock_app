<!DOCTYPE HTML>
<html>
	<head>

		<title>TradingView Charting Library demo</title>
		<meta charset="UTF-8">
		<!-- Fix for iOS Safari zooming bug -->
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="IE=Edge">

		<script type="text/javascript" src="charting_library/charting_library.min.js"></script>
		<script type="text/javascript" src="datafeeds/udf/dist/polyfills.js"></script>
		<script type="text/javascript" src="datafeeds/udf/dist/bundle.js"></script>
		<script type="text/javascript" src="charting_library/static/persiandate.js"></script>

		<script type="text/javascript">

			function getParameterByName(name) {
				name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
				var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
					results = regex.exec(location.search);
				return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
			}

			function initOnReady() {
				var widget = window.tvWidget = new TradingView.widget({
					// debug: true, // uncomment this line to see Library errors and warnings in the console
					fullscreen: true,
					symbol: 'زاگرس',
					//interval: 'D',
					container_id: "tv_chart_container",
//					supported_resolutions: ["1D", "1W", "1M"],
					//	BEWARE: no trailing slash is expected in feed URL
//					datafeed: new Datafeeds.UDFCompatibleDatafeed("https://demo_feed.tradingview.com"),
					datafeed: new Datafeeds.UDFCompatibleDatafeed("http://vip.tadbirgar.com/api/tradingview"),
					library_path: "charting_library/",
					locale: getParameterByName('lang') || "en",
					"timezone": "Asia/Tehran",
					//"locale": "fa",
					disabled_features: ["use_localstorage_for_settings"],
					enabled_features: ["study_templates"],
					charts_storage_url: 'http://saveload.tradingview.com',
					charts_storage_api_version: "1.1",
					client_id: 'tradingview.com',
					user_id: 'public_user_id',
//					supported_resolutions: ["1D", "1W", "1M"],
					//_________________peyman confige
					numeric_formatting: { decimal_sign: "." },
					customFormatters: {
						timeFormatter: {
							format: function(date) { var _format_str = '%h:%m'; return "";/* _format_str.replace('%h', date.getUTCHours(), 2). replace('%m', date.getUTCMinutes(), 2). replace('%s', date.getUTCSeconds(), 2);*/ }
						},
						dateFormatter: {
							format: function(date) {return date2persian(date.getUTCFullYear() + '-' + ((date.getUTCMonth()*1)+1) + '-' + date.getUTCDate()); }
						}
					},
					time_frames: [
						{ text: "50y", resolution: "6M", description: "50 Years" },
						{ text: "3y", resolution: "W", description: "3 Years", title: "3yr" },
						{ text: "8m", resolution: "D", description: "8 Month" },
						{ text: "3d", resolution: "5", description: "3 Days" },
						{ text: "1000y", resolution: "W", description: "All", title: "All" },
					],
					//__________________-
					theme: getParameterByName('theme')

					//____________________________________
//					"width": 980,
//					"height": 610,
//					"symbol": "NASDAQ:AAPL",
//					"interval": "D",
//					"timezone": "Asia/Tehran",
//					"theme": "Light",
//					"style": "1",
//
//					"toolbar_bg": "#f1f3f6",
//					"enable_publishing": false,
//					"allow_symbol_change": true,
//					"container_id": "tradingview_e2cfc"
//
				});
//				widget.activeChart().setTimezone('Asia/Tehran');
//				debugger;
			};

			window.addEventListener('DOMContentLoaded', initOnReady, false);
		</script>

	</head>

	<body style="margin:0px;">
		<div id="tv_chart_container"></div>
	</body>

</html>
