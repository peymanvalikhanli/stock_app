<!DOCTYPE HTML>
<html>
<head>

    <title>TradingView Charting Library demo</title>
    <meta charset="UTF-8">
    <!-- Fix for iOS Safari zooming bug -->
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">

    <script type="text/javascript" src="charting_library/charting_library.min.js"></script>
    <script type="text/javascript" src="datafeeds/udf/dist/polyfills.js"></script>
    <script type="text/javascript" src="datafeeds/udf/dist/bundle.js"></script>
    <script type="text/javascript" src="charting_library/static/persiandate.js"></script>

    <script type="text/javascript">

        function getParameterByName(name) {
            name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                    results = regex.exec(location.search);
            return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
        }

        function initOnReady() {
            var widget = window.tvWidget = new TradingView.widget({
                // debug: true, // uncomment this line to see Library errors and warnings in the console
                fullscreen: true,
                symbol: 'زاگرس',
                container_id: "tv_chart_container",
                datafeed: new Datafeeds.UDFCompatibleDatafeed("http://vip.tadbirgar.com/api/tradingview"),
                library_path: "charting_library/",
                "timezone": "Asia/Tehran",
//					"locale": "fa",
                "locale": "en",
                disabled_features: ["use_localstorage_for_settings"],
                enabled_features: ["study_templates"],
                charts_storage_url: 'http://saveload.tradingview.com',
                charts_storage_api_version: "1.1",
                client_id: 'tradingview.com',
                user_id: 'public_user_id',
//					//_________________peyman confige
                interval: 'D',
                supported_resolutions:["1", "15", "30" , "60" , "120" , "240" , "D", "W", "M", "6M" , "12M"],
                customFormatters: {
                    timeFormatter: {
                        format: function (date) {
                            var _format_str = '%h:%m';
                            return "";
                            /* _format_str.replace('%h', date.getUTCHours(), 2). replace('%m', date.getUTCMinutes(), 2). replace('%s', date.getUTCSeconds(), 2);*/
                        }
                    },
                    dateFormatter: {
                        format: function (date) {
                            return date2persian(date.getUTCFullYear() + '-' + ((date.getUTCMonth() * 1) + 1) + '-' + date.getUTCDate());
                        }
                    }
                },
                supports_marks: true,
                time_frames: [
                    {text: "50y", resolution: "6M", description: "50 Years"},
                    {text: "3y", resolution: "W", description: "3 Years", title: "3yr"},
                    {text: "8m", resolution: "D", description: "8 Month"},
                    {text: "3d", resolution: "5", description: "3 Days"},
                    {text: "1000y", resolution: "W", description: "All", title: "All"},
                ],
                symbolsTypes: [
                    {name: "Stock", value: "stock"}
                ],
                exchanges: [
                    {value: "", name: "All Exchanges", desc: ""}
                ],
                supportedResolutions: ["1", "15", "30", "60", "1D", "2D", "3D", "1W", "3W", "1M", '6M'],
                //__________________-
                //theme: getParameterByName('theme')

                //____________________________________

            });
        }
        ;

        window.addEventListener('DOMContentLoaded', initOnReady, false);
    </script>

</head>

<body style="margin:0px;">
<div id="tv_chart_container"></div>
</body>

</html>
